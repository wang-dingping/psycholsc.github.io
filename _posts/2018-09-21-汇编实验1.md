---
layout: post
title:  "汇编实验1"
excerpt: "汇编实验翻译"
date:   2018-09-21 21:54:54 +0000
categories: Notes
comments: true
---

以下是程序运行后的内存，从CS=200H开始进行观测。

![](https://raw.githubusercontent.com/psycholsc/psycholsc.github.io/master/assets/ASM1.png)

![](https://raw.githubusercontent.com/psycholsc/psycholsc.github.io/master/assets/ASM4.png)

![](https://raw.githubusercontent.com/psycholsc/psycholsc.github.io/master/assets/ASM5.png)

![](https://raw.githubusercontent.com/psycholsc/psycholsc.github.io/master/assets/ASM6.png)

由于网页排版问题，文字很不清晰，无法进行参考，这里是图片版。

![](https://raw.githubusercontent.com/psycholsc/psycholsc.github.io/master/assets/ASM2.png)

[图片下载地址](https://raw.githubusercontent.com/psycholsc/psycholsc.github.io/master/assets/ASM2.png)

![](https://raw.githubusercontent.com/psycholsc/psycholsc.github.io/master/assets/ASM3.png)

[图片下载地址](https://raw.githubusercontent.com/psycholsc/psycholsc.github.io/master/assets/ASM3.png)

由于系统编码问题，无法使用中文进行描述，所以索性改成了英文描述。

上面有两处补充注释需要说明，上面的空间写不下。

1. 关于ASSUME伪操作，汇编中源程序可以定义多个SEGMENT，但每一个段都要和段寄存器建立一种对应关系，ASSUME就是这个建立关系的语句。段寄存器分别有CS、DS、ES、SS，在代码中我们也建立了这样的关系，我们可以认为CODE区对应CS等。但是注意，即使是这样ASSUME了，后面仍然需要写相关代码，例如后面47到50行。
2. 关于PROC后面的FAR的问题，伪操作PROC可以用一些参数来描述，例如NEAR和FAR。FAR的目的是将程序定义到一个远区，这样可以做段间的远调用。如果子程序和调用程序在一个段内,子程序参数设置为NEAR；如果子程序和调用程序不在一个段内,子程序参数设置为FAR。系统把主程序当作DOS调用的一个子程序，DOS内核与主程序不是在同一个段地址内，所以主程序参数要用FAR。



